{"id":"extract-method","actions":[{"type":"setStep","options":{"step":1}},{"type":"popover","options":{"text":"Давайте рассмотрим <i>Извлечение метода<\/i> на примере этой функции.","attachment":"selection","locale":"ru"}},{"type":"popover","options":{"text":"Let's take a look at <i>Extract Method<\/i> using this function as an example.","attachment":"selection","locale":"en"}},{"type":"popover","options":{"text":"Давайте розглянемо <i>Витяг методу<\/i> на прикладі цієї функції.","attachment":"selection","locale":"uk"}},{"type":"select","options":{"location":"printOwing","text":"  \/\/ print banner\n  System.out.println (\"*****************************\");\n  System.out.println (\"****** Customer totals ******\");\n  System.out.println (\"*****************************\");"}},{"type":"popover","options":{"text":"Для начала – простейший случай. Код, выводящий баннер, легко выделить при помощи копирования и вставки.","attachment":"selection","locale":"ru"}},{"type":"popover","options":{"text":"We begin with a very, very simple case. The code for displaying a banner can be easily extracted via copy and paste.","attachment":"selection","locale":"en"}},{"type":"popover","options":{"text":"Спершу – найпростіший випадок. Код, що виводить банер, легко виділити за допомогою копіювання і вставки.","attachment":"selection","locale":"uk"}},{"type":"wait","options":{"timeout":"500"}},{"type":"run","options":{"command":"goDocEnd"}},{"type":"type","options":{"text":"\n\nvoid printBanner() {\n  System.out.println(\"*****************************\");\n  System.out.println(\"****** Customer totals ******\");\n  System.out.println(\"*****************************\");\n}","delay":20}},{"type":"setStep","options":{"step":2}},{"type":"select","options":{"location":"printOwing","text":"  \/\/ print banner\n  System.out.println (\"*****************************\");\n  System.out.println (\"****** Customer totals ******\");\n  System.out.println (\"*****************************\");"}},{"type":"popover","options":{"text":"Заменяем код в исходном методе вызовом нового метода.","attachment":"selection","locale":"ru"}},{"type":"popover","options":{"text":"After that, we replace the code in the original method with a call to the new method.","attachment":"selection","locale":"en"}},{"type":"popover","options":{"text":"Замінюємо код у вихідному методі викликом нового методу.","attachment":"selection","locale":"uk"}},{"type":"type","options":{"text":"←","delay":500}},{"type":"type","options":{"text":"  printBanner();"}},{"type":"readyAndCompile","options":{"text":"Запускаем компиляцию, чтобы убедиться, что всё работает.","text2":"Ура, мы успешно извлекли первый метод.","locale":"ru"}},{"type":"readyAndCompile","options":{"text":"At last, we should compile the code to check for possible errors.","text2":"Cause for celebration – we have successfully extracted the first method!","locale":"en"}},{"type":"readyAndCompile","options":{"text":"Запускаємо компіляцію, щоб переконатися, що все працює.","text2":"Ура, ми успішно витягли перший метод.","locale":"uk"}},{"type":"setStep","options":{"step":3}},{"type":"select","options":{"text":"  \/\/ print details\n  System.out.println(\"name: \" + name);\n  System.out.println(\"amount: \" + |||outstanding|||);"}},{"type":"popover","options":{"text":"Дальше — сложнее. Основная проблема с извлечением сложных методов кроется в локальных переменных.","attachment":"selection","locale":"ru"}},{"type":"popover","options":{"text":"Now things get trickier. The problem with extracting complex methods is buried in local variables.","attachment":"selection","locale":"en"}},{"type":"popover","options":{"text":"Далі — складніше. Основна проблема з відокремленням складних методів криється в локальних змінних.","attachment":"selection","locale":"uk"}},{"type":"select","options":{"location":"printOwing","text":"  \/\/ print details\n  System.out.println(\"name: \" + name);\n  System.out.println(\"amount: \" + outstanding);"}},{"type":"popover","options":{"text":"Давайте попытаемся извлечь метод вывода деталей.","attachment":"selection","locale":"ru"}},{"type":"popover","options":{"text":"Let's try to extract the method for displaying the details.","attachment":"selection","locale":"en"}},{"type":"popover","options":{"text":"Давайте спробуємо відокремити метод виводу деталей.","attachment":"selection","locale":"uk"}},{"type":"wait","options":{"timeout":"500"}},{"type":"run","options":{"command":"goDocEnd"}},{"type":"type","options":{"text":"\n\nvoid printDetails() {\n  System.out.println(\"name: \" + name);\n  System.out.println(\"amount: \" + outstanding);\n}","delay":20}},{"type":"select","options":{"location":"printOwing","text":"  \/\/ print details\n  System.out.println(\"name: \" + name);\n  System.out.println(\"amount: \" + outstanding);"}},{"type":"type","options":{"text":"←","delay":500}},{"type":"type","options":{"text":"  printDetails();"}},{"type":"readyAndCompile","options":{"text":"Давайте запустим компиляцию.","text2":"Ошибка! Переменная <code>outstanding<\/code> в методе <code>printDetails()<\/code> не определена.","success":false,"locale":"ru"}},{"type":"readyAndCompile","options":{"text":"Let's launch the compiler.","text2":"Error! The variable <code>outstanding<\/code> in method <code>printDetails()<\/code> is not defined.","success":false,"locale":"en"}},{"type":"readyAndCompile","options":{"text":"Давайте запустимо компіляцію.","text2":"Помилка! Змінна <code>outstanding<\/code> в методі <code>printDetails()<\/code> не визначена.","success":false,"locale":"uk"}},{"type":"select","options":{"location":"printDetails","text":"outstanding"}},{"type":"popover","options":{"text":"Да, действительно, мы перенесли переменную <code>outstanding<\/code> из исходного метода, но в новом методе ей не присваивается никакого значения.","attachment":"selection","locale":"ru"}},{"type":"popover","options":{"text":"Ah… Yes, we really did move the <code>outstanding<\/code> variable out of the original method but no value is assigned to it in the new method.","attachment":"selection","locale":"en"}},{"type":"popover","options":{"text":"Так, дійсно, ми перенесли змінну <code>outstanding<\/code> з вихідного методу, але в новому методі їй не присвоюється ніякого значення.","attachment":"selection","locale":"uk"}},{"type":"popover","options":{"text":"Лучшее решение — сделать эту переменную параметром метода, и передавать её значение из исходного метода.","attachment":"selection","locale":"ru"}},{"type":"popover","options":{"text":"The better solution is to convert that variable to a method parameter and pass its value from the original method.","attachment":"selection","locale":"en"}},{"type":"popover","options":{"text":"Кращим рішенням буде зробити цю змінну параметром методу, і передавати її значення з вихідного методу.","attachment":"selection","locale":"uk"}},{"type":"moveTo","options":{"place":"text","text":"void printDetails(|||)","delay":0}},{"type":"type","options":{"text":"double outstanding"}},{"type":"moveTo","options":{"location":"printOwing","place":"text","text":"printDetails(|||)","delay":0}},{"type":"type","options":{"text":"outstanding"}},{"type":"readyAndCompile","options":{"text":"Запустим компиляцию сейчас.","text2":"Отлично, всё работает! Двигаемся дальше.","locale":"ru"}},{"type":"readyAndCompile","options":{"text":"Let's launch the compiler.","text2":"A-OK! Let's keep moving.","locale":"en"}},{"type":"readyAndCompile","options":{"text":"Запустимо компіляцію зараз.","text2":"Супер, все працює! Рухаємося далі.","locale":"uk"}},{"type":"setStep","options":{"step":4}},{"type":"select","options":{"location":"printOwing","text":"  Enumeration elements = orders.elements();\n  double outstanding = 0.0;"}},{"type":"select","options":{"location":"printOwing","text":"  \/\/ print owings\n  while (elements.hasMoreElements()) {\n    Order each = (Order) elements.nextElement();\n    outstanding += each.getAmount();\n  }","add":true}},{"type":"popover","options":{"text":"Теперь давайте попробуем извлечь код расчёта задолженности.","attachment":"selection","locale":"ru"}},{"type":"popover","options":{"text":"Now on to the extraction of the code for calculating amounts outstanding.","attachment":"selection","locale":"en"}},{"type":"popover","options":{"text":"Тепер давайте спробуємо відокремити код розрахунку заборгованості.","attachment":"selection","locale":"uk"}},{"type":"wait","options":{"timeout":"500"}},{"type":"run","options":{"command":"goDocEnd"}},{"type":"type","options":{"text":"\n\nvoid getOutstanding() {\n  Enumeration elements = orders.elements();\n  double outstanding = 0.0;\n  while (elements.hasMoreElements()) {\n    Order each = (Order) elements.nextElement();\n    outstanding += each.getAmount();\n  }\n}","delay":20}},{"type":"select","options":{"location":"printOwing","text":"  Enumeration elements = orders.elements();\n  double outstanding = 0.0;\n\n"}},{"type":"type","options":{"text":"←","delay":500}},{"type":"select","options":{"location":"printOwing","text":"\n  \/\/ print owings\n  while (elements.hasMoreElements()) {\n    Order each = (Order) elements.nextElement();\n    outstanding += each.getAmount();\n  }\n"}},{"type":"type","options":{"text":"←","delay":500}},{"type":"type","options":{"text":"  getOutstanding();"}},{"type":"select","options":{"location":"getOutstanding","text":"  Enumeration |||elements||| = orders.elements();\n  double |||outstanding||| = 0.0;"}},{"type":"popover","options":{"text":"Здесь дополнительные сложности создаются локальными переменными, которым присваиваются новые значения. Вполне возможно, что эти значения могли использоваться в оставшемся коде основного метода.","attachment":"selection","locale":"ru"}},{"type":"popover","options":{"text":"In this case, additional difficulties are caused by local variables to which new values are assigned. It is quite possible that these values are used in the remaining code of the main method.","attachment":"selection","locale":"en"}},{"type":"popover","options":{"text":"Тут додаткові складності створюються локальними змінними, яким присвоюються нові значення. Цілком можливо, що ці значення могли використовуватися в залишившемуся коді основного методу.","attachment":"selection","locale":"uk"}},{"type":"popover","options":{"text":"Если значение присваивается параметру, от этого можно избавиться, применив «удаление присваивания параметрам».","attachment":"selection","locale":"ru"}},{"type":"popover","options":{"text":"If a value is assigned to the parameter, you can get rid of this by using <i>Remove Assignments to Parameters<\/i> refactoring.","attachment":"selection","locale":"en"}},{"type":"popover","options":{"text":"Якщо значення присвоюється параметру, від цього можна позбутися, застосувавши «видалення присвоювання параметрами».","attachment":"selection","locale":"uk"}},{"type":"select","options":{"location":"getOutstanding","text":"  double |||outstanding||| = 0.0;"}},{"type":"popover","options":{"text":"Следует проверить каждую из переменных.","attachment":"selection","locale":"ru","placement":"right","hide":"none"}},{"type":"popover","options":{"text":"Let's check each variable.","attachment":"selection","locale":"en","placement":"right","hide":"none"}},{"type":"popover","options":{"text":"Слід перевірити кожну з змінних.","attachment":"selection","locale":"uk","placement":"right","hide":"none"}},{"type":"select","options":{"location":"printOwing","text":"  printDetails(|||outstanding|||);","add":true}},{"type":"popover","options":{"text":"В нашем случае проблему создаёт переменная <code>outstanding<\/code>, которая потом используется в вызове <code>printDetails()<\/code>.","attachment":"selection","locale":"ru","placement":"right","hideOthers":true}},{"type":"popover","options":{"text":"Here, the problem is caused by the <code>outstanding<\/code> variable, which is then used in the <code>printDetails()<\/code> call.","attachment":"selection","locale":"en","placement":"right","hideOthers":true}},{"type":"popover","options":{"text":"В нашому випадку, проблему створює змінна <code>outstanding<\/code>, яка потім використовується у виклику <code>printDetails()<\/code>.","attachment":"selection","locale":"uk","placement":"right","hideOthers":true}},{"type":"popover","options":{"text":"Передадим её обратно в исходный метод.","attachment":"selection","locale":"ru","placement":"right"}},{"type":"popover","options":{"text":"Pass it back to the original method.","attachment":"selection","locale":"en","placement":"right"}},{"type":"popover","options":{"text":"Передамо її назад у вихідний метод.","attachment":"selection","locale":"uk","placement":"right"}},{"type":"select","options":{"place":"type","location":"GetOutstanding"}},{"type":"type","options":{"text":"double","beforeDelay":500}},{"type":"moveTo","options":{"location":"getOutstanding","place":"end","delay":0}},{"type":"type","options":{"text":"\n  return outstanding;"}},{"type":"moveTo","options":{"location":"printOwing","place":"text","text":"|||getOutstanding()","delay":0}},{"type":"type","options":{"text":"double outstanding = "}},{"type":"readyAndCompile","options":{"text":"Запускаем финальную компиляцию.","text2":"Отлично, все работает!","locale":"ru"}},{"type":"readyAndCompile","options":{"text":"Let's perform the final compilation and testing.","text2":"Wonderful, it's all working!","locale":"en"}},{"type":"readyAndCompile","options":{"text":"Запускаємо фінальну компіляцію.","text2":"Супер, все працює.","locale":"uk"}},{"type":"setStep","options":{"step":-1}},{"type":"popover","options":{"text":"На этом рефакторинг можно считать оконченным. В завершение, можете посмотреть разницу между старым и новым кодом.","attachment":"element","locale":"ru","selector":".codeplayer-roadmap","placement":"bottom"}},{"type":"popover","options":{"text":"The refactoring is complete! You can compare the old and new code if you like.","attachment":"element","locale":"en","selector":".codeplayer-roadmap","placement":"bottom"}},{"type":"popover","options":{"text":"На цьому рефакторинг можна вважати закінченим. На завершення, можете подивитися різницю між старим та новим кодом.","attachment":"element","locale":"uk","selector":".codeplayer-roadmap","placement":"bottom"}}],"lang":"java","code":"void printOwing() {\n  Enumeration elements = orders.elements();\n  double outstanding = 0.0;\n\n  \/\/ print banner\n  System.out.println (\"*****************************\");\n  System.out.println (\"****** Customer totals ******\");\n  System.out.println (\"*****************************\");\n\n  \/\/ print owings\n  while (elements.hasMoreElements()) {\n    Order each = (Order) elements.nextElement();\n    outstanding += each.getAmount();\n  }\n\n  \/\/ print details\n  System.out.println(\"name: \" + name);\n  System.out.println(\"amount: \" + outstanding);\n}","steps":[{"ru":"Создайте новый метод и назовите его так, чтобы название отражало суть того, что будет делать этот метод.","en":"Create a new method and name it in a way that makes its purpose self-evident.","uk":"Створіть новий метод. Потурбуйтеся, щоб його назва відбивала суть того, що робитиме цей метод."},{"ru":"Скопируйте беспокоящий вас фрагмент кода в новый метод. Удалите этот фрагмент из старого места и замените вызовом вашего нового метода.","en":"Copy the relevant code fragment to your new method. Delete the fragment from its old location and put a call for the new method there instead.","uk":"Скопіюйте фрагмент коду, що вас цікавить, в новий метод. Видаліть цей фрагмент із старого місця і замініть викликом вашого нового методу."},{"ru":"В новом методе создайте параметры для передачи значений из исходного метода.","en":"In the new method, create parameters for passing values from the original method.","uk":"У новому методі створіть параметри для передачі значень з вихідного методу."},{"ru":"Передайте результаты выполнения, и другие изменяемые данные, обратно в исходный метод.","en":"Pass the results and other changed data back to the original method.","uk":"Передайте результати виконання, та інші змінювані дані, назад в вихідний метод."}]}